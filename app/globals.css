@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------------------------------------
   Brand Tokens
----------------------------------------*/
@layer base {
  :root {
    --radius: 1rem;

    /* Brand palette */
    --brand-blue:  #0045d7; /* primary */
    --brand-cyan:  #00e3fe; /* gradient partner */
    --brand-orange: #fb9216; /* accent/CTA */

    /* Neutrals */
    --ink-900: #0b1220;
    --ink-700: #334155;
    --ink-600: #475569;
    --ink-500: #64748b;
    --paper:   #ffffff;

    /* Shadows */
    --elev-1: 0 1px 2px rgba(2, 6, 23, .06), 0 1px 1px rgba(2, 6, 23, .04);
    --elev-2: 0 8px 24px rgba(2, 6, 23, .10);

    /* Sticky offset */
    --sticky-offset: 6rem;

    /* Skeleton defaults */
    --skeleton-base: rgba(0, 0, 0, 0.06);
    --skeleton-highlight: rgba(255, 255, 255, 0.35);
    --skeleton-radius: 0.5rem;
    --scroll-lock-offset: 0px;
  }

  html {
    scroll-padding-top: var(--sticky-offset);
    font-feature-settings: "cv02","cv03","cv04","cv11";
    scroll-behavior: auto;
    background: var(--paper);
    color: var(--ink-900);
  }

  :is(h1,h2,h3,h4,h5,h6,section,article,div,main)[id] {
    scroll-margin-top: var(--sticky-offset);
  }

  html[data-scroll-behavior="smooth"] {
    scroll-behavior: smooth;
  }

  html[data-scroll-lock="true"] [data-scroll-lock-aware="true"] {
    padding-right: var(--scroll-lock-offset);
    margin-right: calc(-1 * var(--scroll-lock-offset));
  }
}

/* ---------------------------------------
   Utilities
----------------------------------------*/
@layer utilities {
  .brand-gradient-text {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(90deg, var(--brand-blue), var(--brand-cyan));
  }
  .brand-gradient-bg {
    background-image: linear-gradient(135deg, var(--brand-blue), var(--brand-cyan));
  }
  .ring-brand { box-shadow: 0 0 0 2px color-mix(in oklab, var(--brand-blue) 70%, white); }
  .scrollbar-none { -ms-overflow-style: none; scrollbar-width: none; }
  .scrollbar-none::-webkit-scrollbar { display: none; }
}

/* ---------------------------------------
   Skeleton shimmer (global utility)
----------------------------------------*/
@keyframes sk-shimmer {
  100% { transform: translateX(100%); }
}

@keyframes stripe-slide {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}

@keyframes accordion-fade-in {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes lp-fade-in {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: none; }
}

@layer utilities {
  /* Apply to any block that should show a shimmer sweep.
     Example: <div class="w-24 h-4 rounded shimmer"></div> */
  .shimmer {
    position: relative;
    overflow: hidden;
  }
  .shimmer::after {
    content: "";
    position: absolute;
    inset: 0;
    transform: translateX(-100%);
    background-image: linear-gradient(
      90deg,
      transparent,
      var(--skeleton-highlight, rgba(255, 255, 255, 0.35)),
      transparent
    );
    animation: sk-shimmer 1.25s ease-in-out infinite;
  }

  .animate-lp-fade-in {
    animation: lp-fade-in .28s ease-out both;
  }
}

@media (prefers-color-scheme: dark) {
  :root {
    --skeleton-base: rgba(255, 255, 255, 0.08);
  }
}

/* ---------------------------------------
   Base
----------------------------------------*/
@layer base {
  * { -webkit-tap-highlight-color: transparent; }
  ::selection { background: color-mix(in oklab, var(--brand-blue) 20%, var(--brand-cyan)); color: #fff; }

  a {text-underline-offset: 2px; text-decoration-thickness: 1.5px;}
  /* NOTE: Prose link styles are intentionally scoped; avoid adding unscoped `.prose a` rules elsewhere. */
  /* Style links in prose, but NOT buttons or anything inside .not-prose blocks */
  .prose :where(a):not(:where(.not-prose *), [data-button], .btn, .button, [data-ui-link]) {
    color: var(--brand-blue);
  }
  .prose :where(a):not(:where(.not-prose *), [data-button], .btn, .button, [data-ui-link]):hover {
    color: var(--brand-cyan);
  }


  /* Headings */
  h1, h2, h3, h4 {
    font-family: var(--font-candara), system-ui, sans-serif;
    font-weight: 700;
    @apply text-slate-800;
  }
  h1 { @apply text-3xl md:text-4xl tracking-tight leading-loose; }
  h2 { @apply text-2xl md:text-3xl leading-relaxed; }
  h3 { @apply text-xl md:text-2xl leading-relaxed; }
  h4 { @apply leading-relaxed; }

  /* Cards */
  .card { @apply rounded-2xl border border-slate-200 bg-white; box-shadow: var(--elev-1); }
  .card:hover { box-shadow: var(--elev-2); }

  /* Badges */
  .badge { @apply inline-block border border-[--brand-orange] rounded-full bg-slate-100 px-2.5 py-1 text-sm text-slate-700; }
  .badge--brand { color:#fff; background-image: linear-gradient(90deg, var(--brand-blue), var(--brand-cyan)); }
  .badge--accent { background: white; color: #1f2937; }

  /* Form focus */
  input:focus, select:focus, textarea:focus {
    outline: none;
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--brand-cyan) 65%, white);
    border-color: var(--brand-blue);
  }
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;
    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
  }
  .dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

/* ---------------------------------------
   Icon affordance helpers
----------------------------------------*/
@layer components {
  .icon-affordance {
    --icon-affordance-shift: 0.125rem;
    --icon-affordance-ease: cubic-bezier(0.4, 0, 0.2, 1);
    --icon-affordance-dir-x: 0;
    --icon-affordance-dir-y: 0;
    --icon-affordance-state: 0;
    transition: transform 200ms var(--icon-affordance-ease);
    transform: translate3d(0, 0, 0);
    will-change: transform;
  }

  [data-icon-affordance] .icon-affordance {
    pointer-events: none;
    transform: translate3d(
      calc(var(--icon-affordance-dir-x, 0) * var(--icon-affordance-shift, 0) * var(--icon-affordance-state, 0)),
      calc(var(--icon-affordance-dir-y, 0) * var(--icon-affordance-shift, 0) * var(--icon-affordance-state, 0)),
      0
    );
  }

  [data-icon-affordance='tight'] .icon-affordance,
  .icon-affordance--tight {
    --icon-affordance-shift: 0.18rem;
  }

  [data-icon-affordance='loose'] .icon-affordance,
  .icon-affordance--loose {
    --icon-affordance-shift: 0.35rem;
  }

  [data-icon-affordance='right'] .icon-affordance,
  [data-icon-affordance='forward'] .icon-affordance {
    --icon-affordance-dir-x: 1;
    --icon-affordance-dir-y: 0;
  }

  [data-icon-affordance='left'] .icon-affordance,
  [data-icon-affordance='back'] .icon-affordance {
    --icon-affordance-dir-x: -1;
    --icon-affordance-dir-y: 0;
  }

  [data-icon-affordance='down'] .icon-affordance {
    --icon-affordance-dir-x: 0;
    --icon-affordance-dir-y: 1;
  }

  [data-icon-affordance='up'] .icon-affordance {
    --icon-affordance-dir-x: 0;
    --icon-affordance-dir-y: -1;
  }

  [data-icon-affordance='up-right'] .icon-affordance {
    --icon-affordance-dir-x: 1;
    --icon-affordance-dir-y: -1;
  }

  [data-icon-affordance]:hover .icon-affordance,
  [data-icon-affordance]:focus-visible .icon-affordance {
    --icon-affordance-state: 1;
  }

  [data-icon-affordance][data-icon-affordance-active] .icon-affordance,
  [data-icon-affordance]:active .icon-affordance {
    --icon-affordance-state: 1.2;
  }
}

@media (prefers-reduced-motion: reduce) {
  [data-icon-affordance] .icon-affordance {
    transition-duration: 0ms;
  }

  [data-icon-affordance]:hover .icon-affordance,
  [data-icon-affordance]:focus-visible .icon-affordance,
  [data-icon-affordance]:active .icon-affordance,
  [data-icon-affordance][data-icon-affordance-active] .icon-affordance {
    --icon-affordance-state: 0;
    transform: none !important;
  }
}

/* ============== CHEVRON INFINITE BOB + HERO CTA GLOW ==================== */

.chevron-bob {
  animation: hero-chevron-bob 1.7s ease-in-out infinite;
}

@keyframes hero-chevron-bob {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(6px);
  }
}

@media (prefers-reduced-motion: reduce) {
  .chevron-bob {
    animation: none;
  }
}

.hero-cta-glow {
  position: relative;
  z-index: 0;
}

.hero-cta-glow::before {
  content: "";
  position: absolute;
  inset: -10% ;
  border-radius: inherit;
  background: radial-gradient(circle at 50% 50%, #00e3fe90, transparent 50%);
  filter: blur(16px);
  opacity: 0.75;
  transition: opacity 0.3s ease;
  pointer-events: none;
  z-index: -1;
}

.hero-cta-glow:hover::before,
.hero-cta-glow:focus-visible::before {
  opacity: 1;
}

/* ---------------------------------------
   Phone jiggle affordance
----------------------------------------*/
@layer components {
  .phone-affordance {
    --phone-jiggle-duration: 0.55s;
    --phone-jiggle-angle-large: 10deg;
    --phone-jiggle-angle-small: 6deg;
  }

  .phone-affordance:hover .phone-affordance-icon,
  .phone-affordance:focus-visible .phone-affordance-icon {
    animation: phone-jiggle var(--phone-jiggle-duration) ease-in-out;
  }

  .phone-affordance-icon {
    transform-origin: center;
  }
}

@keyframes phone-jiggle {
  0% { transform: rotate(0deg); }
  20% { transform: rotate(calc(var(--phone-jiggle-angle-large) * -1)); }
  40% { transform: rotate(var(--phone-jiggle-angle-large)); }
  60% { transform: rotate(calc(var(--phone-jiggle-angle-small) * -1)); }
  80% { transform: rotate(var(--phone-jiggle-angle-small)); }
  100% { transform: rotate(0deg); }
}

/* ---------------------------------------
   Components: BRAND BUTTONS
----------------------------------------*/
@layer components {
  /* Base button reset */
  .btn {
    @apply inline-flex items-center justify-center whitespace-nowrap
           rounded-full font-semibold 
           transition duration-300 ease-in-out
           focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0
           disabled:pointer-events-none disabled:opacity-50;
    box-shadow: var(--elev-1);
  }

  /* Variants */
  .btn-brand-blue   { @apply bg-[var(--brand-blue)]   text-white hover:opacity-95 focus-visible:ring-[var(--brand-blue)]; }
  .btn-brand-orange { @apply bg-[var(--brand-orange)] text-white hover:opacity-95 focus-visible:ring-[var(--brand-orange)]; }
  .btn-secondary    { @apply bg-white text-slate-700 border border-slate-100 hover:bg-slate-50 focus-visible:ring-slate-200; }
  .btn-outline      { @apply bg-transparent text-slate-900 border border-slate-300 hover:bg-slate-50; }
  .btn-ghost        { @apply bg-transparent text-slate-900 hover:bg-slate-100; }

  /* Ensure anchors inside buttons inherit the button text color and remove underline */
  .btn a,
  .btn a:hover,
  .btn a:focus {
    color: inherit;
    text-decoration: none;
  }

  /* Sizes */
  .btn-hero { @apply h-16 px-8 text-3xl; }
  .btn-xl { @apply h-14 px-6 text-2xl; }
  .btn-lg { @apply h-11 px-6 text-lg; }
  .btn-md { @apply h-10 px-4 text-base; }
  .btn-sm { @apply h-9  px-3 text-sm; }
  .btn-xs { @apply h-7 px-2 text-xs; }

  /* Motion */
  .btn-press { @apply transition-transform motion-safe:hover:scale-[1.03] active:scale-[0.98]; }

  /* Accordions */
  .accordion-motion {
    opacity: 0;
    transform: translateY(4px);
    animation: none;
  }

  details[open] .accordion-motion {
    animation: accordion-fade-in 0.2s ease-out both;
  }

  details:not([open]) .accordion-motion {
    animation: none;
  }

  @media (prefers-reduced-motion: reduce) {
    details[open] .accordion-motion {
      animation: none;
    }
  }
}

/* ---------------------------------------
   Prose
----------------------------------------*/
.prose { @apply text-slate-700; }

.prose blockquote {
  border-left: 4px solid transparent;
  background:
    linear-gradient(#ffffff, #ffffff) padding-box,
    linear-gradient(180deg, var(--brand-blue), var(--brand-cyan)) border-box;
  @apply rounded-xl p-4 text-slate-700;
}

/* Normalize Typography plugin defaults inside blockquotes */
.prose blockquote p { font-style: italic; opacity: 1; }
.prose blockquote p:first-of-type::before,
.prose blockquote p:last-of-type::after { content: none; }

.prose code { @apply rounded-md bg-slate-100 px-1.5 py-0.5 text-slate-800; }
.prose pre code { @apply bg-transparent p-0; }

.prose hr { @apply my-8 border-none h-[1px]; background: linear-gradient(90deg, var(--brand-blue), var(--brand-cyan)); }
.prose img { @apply rounded-2xl; }
.prose.prose-tight :where(h2,h3){ @apply mt-0; }
.prose.prose-tight :where(p,ul,ol){ @apply mt-3 mb-0; }

/* ---------------------------------------
   Layout polish
----------------------------------------*/
.container-edge { @apply mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8; }
.header-blur { @apply sticky top-0 z-50 backdrop-blur supports-[backdrop-filter]:bg-white/70; box-shadow: var(--elev-1); }
.gradient-divider { height: 2px; background: linear-gradient(90deg, transparent, var(--brand-blue), var(--brand-cyan), transparent); }

/* Project page niceties */
.project-hero { @apply rounded-2xl bg-neutral-50; box-shadow: var(--elev-1); }
.project-badges { @apply mt-4 flex flex-wrap gap-2; }
/* ---break---*/
@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}
